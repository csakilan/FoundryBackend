{
  "nodes": [
    {
      "id": {
        "_value": "rds-1",
        "_inputType": "auto-generated",
        "_description": "Unique identifier for the node, automatically generated by the system"
      },
      "type": {
        "_value": "RDS",
        "_inputType": "fixed",
        "_description": "Resource type, fixed as RDS for RDS database instances"
      },
      "position": {
        "_inputType": "auto-generated",
        "_description": "Canvas position, automatically managed by ReactFlow",
        "x": {
          "_value": 100,
          "_inputType": "auto-generated"
        },
        "y": {
          "_value": 200,
          "_inputType": "auto-generated"
        }
      },
      "data": {
        "label": {
          "_value": "RDS",
          "_inputType": "fixed",
          "_description": "Display label on the canvas node"
        },
        "dbName": {
          "_value": "mydatabase",
          "_inputType": "text",
          "_description": "Name of the database (will be prefixed with <build-id> to create dbInstanceIdentifier)",
          "_validation": {
            "required": true,
            "minLength": 1,
            "maxLength": 64
          },
          "_note": "dbInstanceIdentifier will be auto-generated as: <build-id>-<dbName>"
        },
        "engine": {
          "_value": "postgres",
          "_inputType": "choice",
          "_description": "Database engine type",
          "_choices": [
            "postgres",
            "mysql"
          ],
          "_note": "Only PostgreSQL and MySQL are supported"
        },
        "masterUsername": {
          "_value": "dbadmin",
          "_inputType": "text",
          "_description": "Master username for database access",
          "_validation": {
            "required": true,
            "minLength": 1,
            "maxLength": 16,
            "pattern": "^[a-zA-Z][a-zA-Z0-9_]*$"
          },
          "_note": "Must start with a letter. Avoid reserved words like 'admin', 'root', 'user', 'postgres', 'mysql'. Alphanumeric and underscores only"
        },
        "masterUserPassword": {
          "_value": "",
          "_inputType": "password",
          "_description": "Master password for database access (8-128 characters)",
          "_validation": {
            "required": true,
            "minLength": 8,
            "maxLength": 128
          },
          "_note": "SECURITY: Use strong password with mix of uppercase, lowercase, numbers, and special characters"
        }
      },
      "measured": {
        "_inputType": "auto-generated",
        "_description": "Canvas node dimensions, automatically managed by ReactFlow",
        "width": {
          "_value": 40,
          "_inputType": "auto-generated"
        },
        "height": {
          "_value": 40,
          "_inputType": "auto-generated"
        }
      }
    }
  ],
  "edges": [],
  "viewport": {
    "x": 0,
    "y": 0,
    "zoom": 1
  },
  "_hardcodedValues": {
    "_description": "Values that are hardcoded in the CloudFormation template and cannot be modified by users",
    "global": {
      "AWSTemplateFormatVersion": {
        "_value": "2010-09-09",
        "_description": "CloudFormation template format version (AWS standard)"
      }
    },
    "rdsInstance": {
      "dbInstanceClass": {
        "_value": "db.t4g.micro",
        "_description": "Fixed instance class (AWS Graviton2, burstable performance)"
      },
      "allocatedStorage": {
        "_value": 20,
        "_description": "Fixed storage size (20 GB, AWS default minimum)"
      },
      "storageType": {
        "_value": "gp3",
        "_description": "Fixed storage type (General Purpose SSD v3)"
      },
      "storageEncrypted": {
        "_value": true,
        "_description": "Encryption at rest is always enabled for security"
      },
      "multiAZ": {
        "_value": false,
        "_description": "Single-AZ deployment (Multi-AZ disabled for cost optimization)"
      },
      "publiclyAccessible": {
        "_value": false,
        "_description": "Not accessible from internet (security best practice)"
      },
      "backupRetentionPeriod": {
        "_value": 7,
        "_description": "Automated backups retained for 7 days"
      },
      "deletionProtection": {
        "_value": false,
        "_description": "Deletion protection disabled by default"
      },
      "skipFinalSnapshot": {
        "_value": true,
        "_description": "No final snapshot on deletion (change to false for production)"
      },
      "engineVersion": {
        "_value": "auto",
        "_description": "Uses latest stable version for selected engine"
      }
    },
    "resourceNaming": {
      "dbInstanceIdentifierFormat": {
        "_value": "{buildId}-{dbName}",
        "_description": "Auto-generated format: build ID + user-provided database name"
      },
      "logicalIdFormat": {
        "_value": "RDS{sanitizedNodeId}",
        "_description": "CloudFormation logical resource ID format"
      }
    },
    "outputs": {
      "_description": "CloudFormation outputs automatically generated for each RDS instance",
      "endpoint": {
        "_format": "{LogicalId}Endpoint",
        "_description": "The connection endpoint address (hostname)"
      },
      "port": {
        "_format": "{LogicalId}Port",
        "_description": "The port number (5432 for PostgreSQL, 3306 for MySQL)"
      },
      "arn": {
        "_format": "{LogicalId}Arn",
        "_description": "The Amazon Resource Name (ARN) of the RDS instance"
      }
    }
  },
  "_metadata": {
    "version": "1.0.0",
    "resourceType": "AWS::RDS::DBInstance",
    "description": "Simplified RDS configuration with minimal user inputs. Most settings use secure defaults.",
    "inputTypes": {
      "text": "Free-form text input from user",
      "password": "Secure password input (masked)",
      "choice": "Single selection dropdown from predefined options",
      "fixed": "Fixed value, not editable by user",
      "auto-generated": "Automatically generated by system"
    },
    "userConfigurableFields": [
      "dbName - User provides database name (auto-prefixed with build-id)",
      "engine - User chooses between postgres or mysql",
      "masterUsername - User sets admin username",
      "masterUserPassword - User sets admin password"
    ],
    "hardcodedSettings": [
      "dbInstanceClass: db.t4g.micro (Graviton2 burstable instance)",
      "allocatedStorage: 20 GB",
      "storageType: gp3 (General Purpose SSD)",
      "storageEncrypted: true (always encrypted)",
      "multiAZ: false (single-AZ for cost)",
      "publiclyAccessible: false (private only)",
      "backupRetentionPeriod: 7 days",
      "engineVersion: latest stable (auto-selected by AWS)"
    ],
    "securityNotes": [
      "Encryption at rest is always enabled",
      "Database is not publicly accessible",
      "Strong password required (8-128 characters)",
      "Master username must start with letter"
    ],
    "costConsiderations": {
      "freeTier": "db.t4g.micro may be eligible for free tier (750 hours/month, first 12 months)",
      "fixedSpecs": "20 GB gp3 storage, single-AZ deployment minimizes costs",
      "backups": "7-day backup retention included at no extra cost (within allocated storage)",
      "note": "Graviton2 instances (t4g) offer better price-performance than t3"
    }
  }
}
